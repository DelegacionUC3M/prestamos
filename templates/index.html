<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Latest compiled and minified CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css">
  <!-- jQuery library -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <!-- Popper JS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js"></script>
  <!-- Latest compiled JavaScript -->
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js"></script> 

  <meta charset="UTF-8">
  <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='styles/index.css') }}">
  <link rel="shortcut icon" type="image/x-icon" href="/static/img/favicon.ico" />

  <script src="{{ url_for('static', filename='search.js') }}"></script>

  <title>Inicio</title>
</head>

<body>
    {% with messages = get_flashed_messages() %}
      {% if messages %}
        {% for message in messages %}
          <li>{{ message }}</li>
        {% endfor %}
      {% endif %}
    {% endwith %}

    {% if error %}
      <p><strong>Error:</strong> {{ error }}
    {% endif %}

<nav class="shadow-lg navbar navbar-expand-lg navbar-light bg-light">
  <a href="{{ url_for('index') }}" class="navbar-brand">Prestamos</a>
  <div class="collapse navbar-collapse" id="navbarSupportedContent">
    <ul class="navbar-nav mr-auto">
      <!-- Dropdown de objetos -->
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          Objetos
        </a>
        <div class="dropdown-menu" aria-labelledby="navbarDropdown">
          <a class="dropdown-item" href="{{ url_for('item_create') }}">Añadir</a>
          <a class="dropdown-item" href="{{ url_for('item_list') }}">Mostrar</a>
          <a class="dropdown-item" href="{{ url_for('item_edit') }}">Editar</a>
          <div class="dropdown-divider"></div>
          <a class="dropdown-item" href="{{ url_for('item_delete') }}">Borrar</a>
        </div>
      </li>
      <!-- Dropdown de prestamos -->
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          Prestamos
        </a>
        <div class="dropdown-menu" aria-labelledby="navbarDropdown">
          <a class="dropdown-item" href="{{ url_for('loan_create') }}">Añadir</a>
          <a class="dropdown-item" href="{{ url_for('loan_list') }}">Mostrar</a>
          <div class="dropdown-divider"></div>
          <a class="dropdown-item" href="{{ url_for('loan_delete') }}">Finalizar</a>
        </div>
      </li>
      <!-- Dropdown de prestamos -->
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          Sanciones
        </a>
        <div class="dropdown-menu" aria-labelledby="navbarDropdown">
          <a class="dropdown-item" href="{{ url_for('item_create') }}">Añadir</a>
          <a class="dropdown-item" href="{{ url_for('item_list') }}">Mostrar</a>
          <div class="dropdown-divider"></div>
          <a class="dropdown-item" href="{{ url_for('item_delete') }}">Borrar</a>
        </div>
      </li>
    </ul>
  </div>
</nav>

<div id="container" style="width:100%;">                                   
  <div id="left" style="float:left; width:50%;">
    <ul class="list-group">
    {% for item in items %}
    <li class="list-group-item d-flex justify-content-between align-items-center">{{ item.name }}
      <span class="badge badge-secundary ">{{ item.state }}</span>
      <span class="badge badge-info ">{{ item.amount }}</span>
    </li>
    {% endfor %}
    </ul>
  </div>                     
  <div id="right" style="float:right; width:50%;">
    <ul class="list-group">
    {% for loan in loans %}
      {% for item in items %}
        {% if item.id == loan.item_id and loan.refund_date == None %}
    <li class="list-group-item d-flex justify-content-between align-items-center">{{ loan.user }}
      <span class="badge badge-secundary cantidad">{{ item.name }}</span>
      <span class="badge badge-secundary cantidad">{{ loan.amount }}</span>
      <span class="badge badge-info fecha">{{ loan.loan_date }}</span>
    </li>
        {% endif %}
      {% endfor%}
    {% endfor %}
  </div>                   
</div> 
    
</body>
</html>
